import AutomaticIncrementalModal from "./Modal";


async function Increment(CollectionName:string){
let autoIncrData:any=await AutomaticIncrementalModal.findOne({"collectionName":CollectionName},{count:1}).lean();
let incermentid=1;
if(autoIncrData==null){
  AutomaticIncrementalModal.create({
    "collectionName":CollectionName,
    "count":1
  });
}else{
 autoIncrData= await AutomaticIncrementalModal.findOne({
    "collectionName":CollectionName},{
    "count":1
  }).lean();
  incermentid+=autoIncrData.count;
 //update after increment
 await AutomaticIncrementalModal.updateOne({
    "collectionName":CollectionName},{
    "count":incermentid
  });
}
return incermentid;

}

export  {Increment};